(this["webpackJsonpamr-cra"]=this["webpackJsonpamr-cra"]||[]).push([[0],{41:function(e,t,a){e.exports=a(55)},46:function(e,t,a){},47:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(19),i=a.n(r),o=(a(46),a(11)),c=a(12),l=a(8),d=a(16),u=a(14),m=a(20),p=a(40),f=a(32),h=(a(47),a(48),a(33)),b=a(34),g=a(6),y=a(27),v={id:"q_1_1",text:"Is a copy of the current treatment guidelines available in this department?",type:"q",subType:"y_n",standards:"F1, U1, B1"},_={id:"q_3_01",text:"Number of patients with dysentery whose records were reviewed",type:"q",subType:"%",standards:"F3"},x={id:"q_3_02",text:"Number of patients reviewed who had faecal culture ordered",type:"q",subType:"%",standards:"F3"},q={id:"q_3_03",text:"Number of patients for whom faecal sample collection procedure was witnessed",type:"q",subType:"%",standards:"F4-F9"},w={id:"q_3_04",text:"Number of patients for whom informed consent was obtained and documented in the clinical notes before performing faeces culture",type:"q",subType:"%",standards:"F4"},E={id:"q_3_05",text:"Number of patients from whom faeces were collected using aseptic technique",type:"q",subType:"%",standards:"F5"},T={id:"q_3_06",text:"Number of patients for whom a minimum of 1g of feaces was collected\xa0for faeces culture",type:"q",subType:"%",standards:"F6"},N={id:"q_3_07",text:"Number of patients for whom the faeces collection containers are correctly labelled including at least: patient identifiers, site, date and time of collection",type:"q",subType:"%",standards:"F7"},k={id:"q_3_08",text:"Number of patients for whom the lab request form was filled out completely and accurately, including at least: patient identifiers, site, date and time of collection, clinical information regarding suspected diagnosis, and contact details of requesting doctor",type:"q",subType:"%",standards:"F8"},S={id:"q_3_09",text:"Number of patients for whom faeces collection is documented in the clinical notes",type:"q",subType:"%",standards:"F9"},F={facility:{title:"Facility-Level Assessment",instructions:['Please complete the following, from the "Technical Scorecard: Laboratory Clinical Interface AMR Scorecard", Section 1 in C. Clinical Site Assessment.',"The corresponding data sources are indicated in the section headers for reference. The relevant standards are indicated after each question in parentheses."],questions:[{id:"fac_sec_1",text:"Oversight Committee",dataSource:"[LC1.1]",type:"section",children:[{id:"fac_q_1",text:"Does the clinical facility have an oversight committee?",standards:"F1, U1, B1",tags:[],weight:1,recs:[],resources:[],type:"q",subType:"y_n",subQs:[{id:"fac_q_1_sub_preface",text:"Does the committee:",type:"preface"},{id:"fac_q_1_c1",type:"q",subType:"box",text:"Develop/revise treatment guidelines",recs:[]},{id:"fac_q_1_c2",type:"q",subType:"box",text:"Use cumulative AST data to inform guidelines",recs:[]},{id:"fac_q_1_c3",type:"q",subType:"box",text:"Review antibiotic consumption data",recs:[]},{id:"fac_q_1_c4",type:"q",subType:"box",text:"Review data from AMS rounds",recs:[]}]}]},{id:"fac_sec_2",text:"Lab Handbook",dataSource:"[LC1.2 - 1.4]",type:"section",children:[{id:"fac_q_2",text:"Does the clinical facility have a \u201cLaboratory Handbook\u201d which describes specimen collection, storage, and transportation of samples?",standards:"F2, U2, B2",tags:[],weight:1,recs:[],resources:[],type:"q",subType:"y_n",subQs:[{id:"fac_q_2_sub_preface",text:"Does the handbook state:",type:"preface"},{id:"fac_q_2_c1",type:"q",subType:"box",tags:["f","u","b"],standards:"F4, U4, B4",text:"Informed consent should be obtained before collection of faeces, urine or blood for culture"},{id:"fac_q_2_c2",type:"q",subType:"box",tags:["u","b"],standards:"F5",text:"Urine and blood should be collected before administration of antibiotics "},{id:"fac_q_2_c3",type:"q",subType:"box",tags:["f"],standards:"U5, B5",text:"Faeces should be collected using aseptic technique "},{id:"fac_q_2_c4",type:"q",subType:"box",tags:["f"],standards:"F6",text:"Minimum of 1g of faeces should be collected for faeces culture"},{id:"fac_q_2_c5",type:"q",subType:"box",tags:["u"],standards:"U8",text:"A minimum of 3 mL urine should be collected for urine culture"},{id:"fac_q_2_c6",type:"q",subType:"box",tags:["b"],standards:"B6",text:"Handwashing should be performed prior to performing blood collection for culture"},{id:"fac_q_2_c7",type:"q",subType:"box",tags:["b"],standards:"B7",text:"Hands should be disinfected prior to performing a blood culture"},{id:"fac_q_2_c8",type:"q",subType:"box",tags:["b"],standards:"B8",text:"Sterile gloves should be used when performing a blood culture"},{id:"fac_q_2_c9",type:"q",subType:"box",tags:["b"],standards:"B9",text:"Blood cultures should be drawn from peripheral sites"},{id:"fac_q_2_c10",type:"q",subType:"box",tags:["b"],standards:"B10",text:"Serial blood cultures should be collected from separate venipuncture sites"},{id:"fac_q_2_c11",type:"q",subType:"box",tags:["b"],standards:"B11",text:"Puncture site should be cleaned properly as per manufacturer recommended technique and using appropriate disinfectant"},{id:"fac_q_2_c12",type:"q",subType:"box",tags:["b"],standards:"B14",text:"Bottle-top should be disinfected and disinfectant should be allowed to dry prior to inoculation"},{id:"fac_q_2_c13",type:"q",subType:"box",tags:["b"],standards:"B15",text:"Needles should not be exchanged between blood culture collection and inoculation of blood culture bottles"},{id:"fac_q_2_c14",type:"q",subType:"box",tags:["b"],standards:"B17",text:"Minimum of 2 and maximum of 3 Blood cultures should be drawn within 24 hours"},{id:"fac_q_2_c15",type:"q",subType:"box",tags:["b"],standards:"B19",text:"The volume of blood collected should follow the manufacturer's recommendations: typically 10mL per bottle for adults, 1-3 mL per bottle for children"},{id:"fac_q_2_sub_preface_d",type:"preface",text:"Are collection containers correctly labelled for:"},{id:"fac_q_2_d1",type:"q",subType:"box",tags:["f"],standards:"F7",text:"Faeces"},{id:"fac_q_2_d2",type:"q",subType:"box",tags:["b"],standards:"B20",text:"Blood"},{id:"fac_q_2_d3",type:"q",subType:"box",tags:["u"],standards:"U9",text:"Urine"},{id:"fac_q_2_sub_preface_e",type:"preface",text:"Are samples delivered to the laboratory as soon as possible and within the recommended time periods for:"},{id:"fac_q_2_e1",type:"q",subType:"box",tags:["f"],standards:"F11",text:"Faeces"},{id:"fac_q_2_e2",type:"q",subType:"box",tags:["b"],standards:"B24",text:"Blood"},{id:"fac_q_2_e3",type:"q",subType:"box",tags:["u"],standards:"U16",text:"Urine"}]},{id:"fac_q_3_preface",type:"preface",text:"Do the facility treatment guidelines include the following requirements:",children:[{id:"fac_q_3a",text:"To do faecal culture if there is dysentery, suspicion of a public health threat / outbreak or if there are associated signs of systemic infection?",standards:"F3",tags:["f"],weight:1,recs:[],resources:[],type:"q",subType:"y_n"},{id:"fac_q_3b",text:"To do urine culture if there are clinical indications such as suspected urinary tract infection; systemic sepsis without a clear focus or asymptomatic bacteriuria in pregnancy?",standards:"U3",tags:["u"],weight:1,recs:[],resources:[],type:"q",subType:"y_n"},{id:"fac_q_3c",text:"To do blood culture with clinical suspicion of blood stream infection?",standards:"B3",tags:["b"],weight:1,recs:[],resources:[],type:"q",subType:"y_n"}]}]},{id:"fac_sec_3",text:"Lab Request form",dataSource:"[LC1.5]",type:"section",children:[{id:"fac_q_4_preface",type:"preface",standards:"F8, U10, B21",text:"Does the laboratory request form include:"},{id:"fac_q_4a",type:"q",subType:"box",text:"Patient identifiers"},{id:"fac_q_4b",type:"q",subType:"box",text:"Site name"},{id:"fac_q_4c",type:"q",subType:"box",text:"Date of admission"},{id:"fac_q_4d",type:"q",subType:"box",text:"Date & time of collection"},{id:"fac_q_4e",type:"q",subType:"box",text:"Clinical information regarding suspected diagnosis"},{id:"fac_q_4f",type:"q",subType:"box",text:"Contact details of requesting doctor"}]}]},inputs:{title:"Clinical Facility Data Inputs",instructions:["Clinical Facility Data Inputs instructions...","Before beggining this section, please select four departments to assess, as well as the target numbers."],questions:[{id:"fac_sec_1",text:"Department Documents, Policies & Structures",type:"section",subType:"table",children:[v,{id:"q_1_2",text:"Is there evidence that the ward or department actively monitors test results for patterns suggestive of nosocomial outbreaks or hospital acquired infections?",type:"q",subType:"y_n",standards:"F17, U19, B30"},{id:"q_1_3",text:"Does the ward or department engage the laboratory if there is suggestive of nosocomial outbreaks or hospital acquired infections?",type:"q",subType:"y_n",standards:"F17, U19, B30"},{id:"q_1_4",text:"Do the ward or department clinical staff and laboratory staff regularly meet (at least quarterly) to troubleshoot gaps in laboratory-clinical linkages, including specimen collection, referral, interpretation and reporting?",type:"q",subType:"y_n",standards:"F17, U19, B30"}]},{id:"fac_sec_2",text:"Sample Requisition, collection, transport & storage",type:"section",subType:"table",children:[{id:"q_2_1",text:"Is a \u201cLaboratory Handbook\u201d which describes specimen collection, storage, and transportation of samples available to clinical staff in the ward or department?",type:"q",subType:"y_n",standards:"F2, U2, B2"},{id:"q_2_2",text:"Are clinical staff aware of the target time to transfer samples (all specimen types) to the lab?",type:"q",subType:"y_n",standards:"F11, U13"},{id:"q_2_3",text:"Are clinical staff aware of the need to store faeces and urine samples in fridge if there is a delay?",type:"q",subType:"y_n",standards:"F10, U12"},{id:"q_2_4",text:"Is there designated fridge storage space for samples in the department/ward?",type:"q",subType:"y_n",standards:"F10, U12"},{id:"q_2_5",text:"Are clinical staff aware of the need to store blood samples at room temperature if there is a delay?",type:"q",subType:"y_n",standards:"B23"}]},{id:"fac_sec_3",text:"Faeces Culture",type:"section",subType:"table",children:[_,x,q,w,E,T,N,k,S,{id:"q_3_10",text:"Number of patients for faeces culture whose records were reviewed ",type:"q",subType:"%",standards:"F14, F16"},{id:"q_3_11",text:"Number of patients for faeces culture whose records were reviewed where there is evidence that laboratory test results are placed in the patient folder",type:"q",subType:"%",standards:"F14"},{id:"q_3_12",text:"Number of patients for faeces that critical call outs regarding patients test results received from lab are promptly communicated to the clinician/wards and documented",type:"q",subType:"%",standards:"F16"},{id:"q_3_13",text:"Number of patients for faeces culture whose records were reviewed there is evidence that antibiotic treatment is revised based on the laboratory AST result",type:"q",subType:"%",standards:"F16"},{id:"q_3_14",text:"Number of patients for faeces culture whose records were reviewed and there is evidence that antibiotic treatment followed the clinical site prescriber guidelines for common medical conditions",type:"q",subType:"%",standards:"F16"},{id:"q_3_15",text:"Number of patients for faeces culture whose records were reviewed and there is evidence that antibiotic treatment is consistent with medices formulary ",type:"q",subType:"%",standards:"F16"}]}],requiresSetup:!0,targets:[{sectionId:"documentation",sectionName:"Indicator: Documentation, Policies & Structures",sectionTargets:[{id:"guidelines",text:"Percentage of departments that should have a copy of the current treatment guidelines"},{id:"handbook",text:"Percentage of departments that should have a copy of the current Laboratory Handbook"},{id:"monitor",text:"Percentage of departments that actively monitor test results for patterns suggestive of nosocomial outbreaks or hospital acquired infections"},{id:"nosocomial",text:"Percentage of departments that engage the laboratory if there is suggestive of nosocomial outbreaks or hospital acquired infections?"},{id:"meet",text:"Percentage of departments that have clinical staff and laboratory staff regularly meet (at least quarterly) to troubleshoot gaps in laboratory-clinical linkages, including specimen collection, referral, interpretation and reporting?"}]},{sectionId:"collection-all",sectionName:"Indicator: Sample Collection (All)",sectionTargets:[{id:"informed",text:"Percentage of patients for whom sample collection and informed consent was obtained and documented in the clinical notes"},{id:"significant",text:"Percentage of patients for whom a clinically significant sample was collected"},{id:"aseptic",text:"Percentage of patients from whom the sample was collected using aseptic and correct technique"},{id:"antibiotics",text:"Percentage of patients for culture whose sample was collected prior to administration of antibiotics"},{id:"minimum",text:"Percentage of patients for whom the minimum sample volume was collected"},{id:"labelled",text:"Percentage of patients with correctly labelled sample collection containers"},{id:"form",text:"Percentage of patients with completely and accurately completed lab request form"}]},{sectionId:"collection-blood",sectionName:"Indicator: Sample Collection (Blood only)",sectionTargets:[{id:"washed",text:"Percentage of patients for whom clinician taking blood sample washed hands prior to procedure"},{id:"disinfected",text:"Percentage of patients for whom clinician taking blood sample disinfected hands prior to procedure"},{id:"sterile",text:"Percentage of patients for whom clinician taking blood sample used sterile gloves for procedure"},{id:"peripheral",text:"Percentage of patients from whom blood was drawn from peripheral sites for blood culture"},{id:"venipuncture",text:"Percentage of patients for whom blood cultures were drawn from separate venipuncture sites"},{id:"cleaned",text:"Percentage of patients for whom puncture site was cleaned using appropriate disinfectant"},{id:"site-dry",text:"Percentage of patients for whom puncture site was disinfected allowed time to dry before inserting needle"},{id:"tops-disinfected",text:"Percentage of patients for whom the blood culture bottle tops were disinfected prior to inoculation"},{id:"tops-dry",text:"Percentage of patients for whom the blood culture bottle tops allowed to dry prior to inoculation"},{id:"needles",text:"Percentage of patients whom needles were not exchanged between blood culture collection and inoculation of blood culture bottles"},{id:"first",text:"Percentage of patients whom had blood culture bottles inoculated first, if blood is collected for other tests"},{id:"drawn",text:"Percentage of patients whom had a minimum of 2 and maximum of 3 blood cultures drawn within 24 hours"},{id:"aerobic",text:"Percentage of patients patients whom had an aerobic blood culture in a resource-limited setting"},{id:"volume",text:"Percentageof patients whom had blood collection where the volume followed the manufacturer's recommendations: typically 10mL per bottle for adults, 1-3 mL per bottle for children"}]},{sectionId:"turnaround",sectionName:"Indicator: Turnaround time (TAT) of sample sent to lab",sectionTargets:[{id:"faeces",text:"Turnaround time from faeces sample collection to receipt at lab (in hours)"},{id:"urine",text:"Turnaround time from urine sample collection to receipt at lab  (in hours)"},{id:"blood",text:"Turnaround time from blood sample collection to receipt at lab  (in hours)"},{id:"transported",text:"Percentage of samples transported to lab within target TAT"},{id:"sent",text:"Percentage of clinical staff that are aware of the target times for sample sent to the lab"},{id:"store",text:"Percentage of clinical staff that are aware of how to store a sample if there is a delay in transporting it to the lab"},{id:"fridge",text:"Percentage of departments that have a designated fridge for storage of samples"}]},{sectionId:"result-use",sectionName:"Indicator: Use Test Result",sectionTargets:[{id:"folder",text:"Percentage of patients whose records were reviewed where there is evidence that laboratory test results are placed in the patient folder"},{id:"communicated",text:"Percentage of patients that critical call out test results from the lab were communicated promptly to the clinician/wards and documented"},{id:"revised",text:"Percentage of patients where there is evidence that antibiotic treatment is revised based on the laboratory AST result"},{id:"guidelines",text:"Proportion of patients where antibiotic treatment followed the clinical site prescriber guidelines for common medical conditions"},{id:"formulary",text:"Proportion of patients where there is evidence that antibiotic treatment is consistent with medices formulary "},{id:"engage",text:"Percentage of wards or department that engage the laboratory if there is suggestive of nosocomial outbreaks or hospital acquired infections"},{id:"meet",text:"Percentage of wards or departments where clinical staff and laboratory staff meet at least quarterly"}]}],results:[{text:"A. Appropriate Diagnostic Test Order (Clinical Facility, by Department)",results:[{text:"Percentage of departments that should have a copy of the current treatment guidelines",question:v,target:{sectionId:"documentation",id:"guidelines"},standards:"F1, U1, B1",resources:[],recommendations:["Distribute treatment guidelines to departments with none currently available"]}]},{text:"B1. Sample Collection: Faeces",results:[{standards:"F4",text:"Proportion of patients for whom informed consent was obtained and documented in the clinical notes before performing faeces culture",numerator:w,denominator:q,target:{sectionId:"collection-all",id:"informed"},recommendations:["[1] Remind clinicians of the importance of correct use & documentation of request forms, including informed consent, as incomplete forms will lead to samples being rejected. ",'[2] Stipulate that a "Reply" line should be included on clinical reports that patient details, including informed consent, are essential for sample processing'],resources:[]},{standards:"F5",text:"Proportion of patients from whom faeces were collected using aseptic technique",numerator:E,denominator:q,target:{sectionId:"collection-all",id:"aseptic"},recommendations:["[1] Remind clinicians that samples not collected aseptically, are of doubtful clinical significance. ",'[2] Stipulate that a "Reply" line should be included on clinical reports that samples not collected aseptically, are of doubtful clinical significance, and a repeat sample must be sent ASAP'],resources:[]},{standards:"F6",text:"Proportion of patients for whom a minimum of 1g of feaces was collected\xa0for faeces culture",numerator:T,denominator:q,target:{sectionId:"collection-all",id:"minimum"},recommendations:["[1] Remind clinicians that a suffient quantity of faecal mater is required for testing and true representation of the microbes within",'[2] Stipulate that a "Reply" line should be included on clinical reports that samples not collected in sufficient quantity may adversly affect the results and may lead to false negatives'],resources:[]},{standards:"F7",text:"Proportion of patients with correctly labelled sample collection containers",numerator:N,denominator:q,target:{sectionId:"collection-all",id:"labelled"},recommendations:["[1] Remind clinicians of the significance of correctly labelling patient identifiers on sample containers, as incomplete or incorrect details will lead to samples being rejected ",'[2] Stipulate that a "Reply" line should be included on clinical reports that correct patient details on samples are essential for sample processing, those with incomplete patient identifiers must be rejected and if possible a request for a new sample sent'],resources:[]},{standards:"F8",text:"Proportion of patients with completely and accurately completed lab request form",numerator:k,denominator:q,target:{sectionId:"collection-all",id:"form"},recommendations:["[1] Remind clinicians of the significance of correct documentation of patient and sample details on all request forms, as incomplete or incorrect details will lead to samples being rejected ",'[2] Stipulate that a "Reply" line should be included on clinical reports that correct patient & sample details on request forms are essential for sample processing, those with incomplete patient identifiers or wrong sample details must be rejected and if possible a request for a new sample sent'],resources:[]},{standards:"F9",text:"Proportion of patients with faecal collection documented in clinical notes",numerator:S,denominator:q,target:{sectionId:"collection-all",id:"informed"},recommendations:["[1] Remind clinicians on the importance of complete and correct sample notes and clinical history","[2] All samples must be noted and described for the material they contain on the request form to ensure correct sample processing and pairing of samples with the relevant request form"],resources:[]}]}],departments:[{id:"medi",name:"Medical"},{id:"gene",name:"General Surgery"},{id:"pedi",name:"Pediatrics"},{id:"inte",name:"Intensive Care Unit (Adult)"},{id:"obst",name:"Obstetrics / Gynaecology"},{id:"emer",name:"Emergency / Trauma"},{id:"neon",name:"Neonatal Intensive Care Unit"},{id:"orth",name:"Orthopeadics"},{id:"card",name:"Cardiology"},{id:"pedi",name:"Pediatric Intensive Care Unit"},{id:"neur",name:"Neurology"},{id:"onco",name:"Oncology"},{id:"burn",name:"Burn Unit"},{id:"gast",name:"Gastroenterology"},{id:"neph",name:"Nephrology / Urology"}]}},P=function(e,t){return"target-".concat(e,"--").concat(t)},D=function(e,t){return"cell-".concat(e.id,"--").concat(t.id)},C=a(38),B=a(7),I=a.n(B),R=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(o.a)(this,a),n=t.call(this,e);F[n.props.section].departments;var s=[];return n.state={contents:null,selectedDepts:s,begun:!1,warnings:[]},n.toggleSubQs=n.toggleSubQs.bind(Object(l.a)(n)),n.selectDept=n.selectDept.bind(Object(l.a)(n)),n.removeDept=n.removeDept.bind(Object(l.a)(n)),n.begin=n.begin.bind(Object(l.a)(n)),n.processElement=n.processElement.bind(Object(l.a)(n)),n.getSection=n.getSection.bind(Object(l.a)(n)),n.getQTable=n.getQTable.bind(Object(l.a)(n)),n.qs=[],n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=F[this.props.section].requiresSetup,t={};e||this.generateQuestions(t)}},{key:"generateQuestions",value:function(e){var t=this,a=F[this.props.section].questions.map((function(e){return t.processElement(e)}));this.setState({contents:a});var n={questions:this.qs,departments:this.state.selectedDepts,targetData:e};this.props.sendMap(this.props.section,n)}},{key:"getInstructions",value:function(){var e=F[this.props.section],t=e.title,a=e.instructions;return s.a.createElement("div",{className:"instructions"},s.a.createElement("h3",null,t),a.map((function(e,t){return s.a.createElement("span",{className:"instruction",key:"inst-"+t},e)})),!this.state.begun&&this.getDeptSelection(),!this.state.begun&&this.getTargetSetting(),!this.state.begun&&this.getStartButton())}},{key:"processElement",value:function(e){switch(e.type){case"section":return this.getSection(e);case"preface":return this.getPreface(e);case"q":e.id;var t=e.subType;e.expectedValue;if(this.qs.push(e),"box"===t)return this.getQuestionBox(e);if("y_n"===t)return this.getQuestionYN(e);if("%"===t)return this.getQuestionPerc(e);default:console.error("Unknown element type: ",e)}}},{key:"getSection",value:function(e){var t,a=e.children,n=e.id,r=e.text,i=e.subType,o=e.dataSource,c=void 0===o?"":o;return t="table"===i?this.getQTable(a):I.a.map(a,this.processElement),s.a.createElement(b.a,{key:"sect-"+n},s.a.createElement(b.a.Header,null,s.a.createElement(h.a.Toggle,{as:m.a,variant:"link",eventKey:n},c+" "+r)),s.a.createElement(h.a.Collapse,{eventKey:n},s.a.createElement(b.a.Body,null,t)))}},{key:"getQTable",value:function(e){var t=this;return s.a.createElement(y.a,{striped:!0,bordered:!0,responsive:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null),this.state.selectedDepts.map((function(e){return s.a.createElement("th",{key:"th-"+e.name},e.name)})))),s.a.createElement("tbody",null,e.map((function(e,a){t.qs.push(e);e.id;var n=e.text,r=e.tags,i=e.standards,o=e.subType,c=s.a.createElement(s.a.Fragment,null,!!r&&!!r.length&&s.a.createElement("span",{className:"specimen-tags"},r.map((function(t){return s.a.createElement("i",{key:"tag-"+e.id+"-"+t,className:t})}))),s.a.createElement("span",{className:"response-text"},n),!!i&&s.a.createElement("span",{className:"standard-tag"}," (",i,")"));return s.a.createElement("tr",{key:"tr-"+a+"-"+e.id},s.a.createElement("td",null,c),t.state.selectedDepts.map((function(t){var a,n=D(t,e);switch(o){case"%":var r=null;0,a=s.a.createElement(g.a.Control,{type:"number",min:0,id:n,defaultValue:r});break;case"y_n":a=s.a.createElement(s.a.Fragment,null,s.a.createElement(g.a.Check,{name:n,type:"radio",id:n,label:"yes"}),s.a.createElement(g.a.Check,{name:n,type:"radio",id:n+"_no",label:"no"}));break;default:return void console.error("Table not implemented for subtype: "+o)}return s.a.createElement("td",{key:n},a)})))}))))}},{key:"getPreface",value:function(e){var t=this,a=e.id,n=e.text,r=e.standards,i=e.children;return s.a.createElement("div",{key:a},s.a.createElement(g.a.Label,null,s.a.createElement("span",{className:"question-text"},n),!!r&&s.a.createElement("span",{className:"standard-tag"}," (",r,")")),!!i&&!!i.length&&s.a.createElement("div",{className:"child-questions"},i.map((function(e){return t.processElement(e)}))))}},{key:"getQuestionBox",value:function(e){var t=e.id,a=e.text,n=e.tags,r=e.standards,i=s.a.createElement(s.a.Fragment,null,!!n&&!!n.length&&s.a.createElement("span",{className:"specimen-tags"},n.map((function(e){return s.a.createElement("i",{key:"tag-"+t+"-"+e,className:e})}))),s.a.createElement("span",{className:"response-text"},a),!!r&&s.a.createElement("span",{className:"standard-tag"}," (",r,")"));return s.a.createElement(g.a.Check,{type:"checkbox",id:t,key:t,label:i})}},{key:"getQuestionPerc",value:function(e){var t=e.id,a=e.text,n=e.tags,r=e.standards,i=s.a.createElement(s.a.Fragment,null,!!n&&!!n.length&&s.a.createElement("span",{className:"specimen-tags"},n.map((function(e){return s.a.createElement("i",{key:"tag-"+t+"-"+e,className:e})}))),s.a.createElement("span",{className:"response-text"},a),!!r&&s.a.createElement("span",{className:"standard-tag"}," (",r,")"));return s.a.createElement(s.a.Fragment,null,s.a.createElement(g.a.Control,{id:t,key:t,type:"number",min:0,max:100}),i)}},{key:"toggleSubQs",value:function(e){var t=e.target.id,a=!0;t.endsWith("_no")&&(t=t.slice(0,t.length-"_no".length),a=!1),document.querySelector("#".concat(t,"_parent")).classList.toggle("show-sub-questions",a)}},{key:"getQuestionYN",value:function(e){var t=this,a=e.id,n=e.text,r=e.standards,i=e.subQs,o=e.tags,c=i?this.toggleSubQs:null;return s.a.createElement("div",{key:a,id:a+"_parent",className:"parent-questions"},s.a.createElement(g.a.Group,null,s.a.createElement(g.a.Label,null,!!o&&!!o.length&&s.a.createElement("span",{className:"specimen-tags"},o.map((function(e){return s.a.createElement("i",{key:"tag-"+a+"-"+e,className:e})}))),s.a.createElement("span",{className:"question-text"},n),!!r&&s.a.createElement("span",{className:"standard-tag"}," (",r,")")),s.a.createElement("div",{className:"response-text"},s.a.createElement(g.a.Check,{onChange:c,name:a,inline:!0,type:"radio",id:a,label:"yes"}),s.a.createElement(g.a.Check,{onChange:c,name:a,inline:!0,type:"radio",id:a+"_no",label:"no"}))),!!i&&s.a.createElement("div",{className:"sub-questions child-questions"},i.map((function(e){return t.processElement(e)}))))}},{key:"selectDept",value:function(e,t){this.setState({selectedDepts:e})}},{key:"removeDept",value:function(e,t){this.setState({selectedDepts:e})}},{key:"begin",value:function(){var e=this,t=4===this.state.selectedDepts.length,a=F[this.props.section].targets,n={},s=a.every((function(e){return e.sectionTargets.every((function(t){var a=e.sectionId,s=P(a,t.id),r=document.querySelector("#".concat(s));if(!r.value)return!1;var i=Number(r.value),o=!isNaN(i)&&i>=0&&i<=100;return n[a]||(n[a]={}),n[a][t.id]=i,o}))})),r=[];t||r.push("select four departments to assess"),s||r.push("ensure that all target percentages are set as integers less than or equal to 100");var i=t&&s;this.setState({warnings:r,begun:i},(function(){i&&e.generateQuestions(n)}))}},{key:"getStartButton",value:function(){if(F[this.props.section].requiresSetup){var e=null;return this.state.warnings.length&&(e="Please ".concat(this.state.warnings.join(" and "),".")),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"warnings text-danger"},e),s.a.createElement(m.a,{onClick:this.begin},"Begin Assessment"))}}},{key:"getDeptSelection",value:function(){var e=F[this.props.section].departments;if(e)return s.a.createElement("div",{className:"mt-3"},s.a.createElement("h4",null,"Select four departments to assess"),s.a.createElement(C.Multiselect,{options:e,placeholder:"select departments",avoidHighlightFirstOption:!0,selectionLimit:4,showCheckbox:!0,closeOnSelect:!1,closeIcon:"cancel",onSelect:this.selectDept,onRemove:this.removeDept,displayValue:"name"}))}},{key:"getTargetSetting",value:function(){var e=F[this.props.section].targets;if(e)return s.a.createElement("div",{className:"mt-3"},s.a.createElement("h4",null,"Set targets for the assessment"),e.map((function(e){return s.a.createElement("div",{className:"target-section",key:e.sectionName},s.a.createElement("h5",null,e.sectionName),e.sectionTargets.map((function(t,a){return s.a.createElement("div",{key:P(e.sectionId,t.id)},s.a.createElement(g.a.Control,{className:"target",id:P(e.sectionId,t.id),type:"number",min:0,max:100,defaultValue:100}),s.a.createElement(g.a.Label,null,t.text),s.a.createElement("br",null))})),s.a.createElement("br",null))})))}},{key:"render",value:function(){var e=F[this.props.section],t=(e.departments,e.targets,e.requiresSetup),a=this.state.begun||!t;return s.a.createElement(h.a,{id:"".concat(this.props.section,"-section")},this.getInstructions(),!!a&&this.state.contents)}}]),a}(s.a.Component),O=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getMissedItem",value:function(e){var t=e.id,a=e.text,n=e.standards;return s.a.createElement("div",{className:"missed-standard",key:t},s.a.createElement("h5",null,"Missed Standard:"),s.a.createElement("span",{className:"negate-tag"},"+"),!!n&&s.a.createElement("span",{className:"standard-tag"}," ",n,": "),s.a.createElement("span",{className:"text"},'"',a,'"'))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"results"},s.a.createElement("h3",null,"Facility-Level Assessment"),s.a.createElement("h4",null,"Recommendations & Resources"),s.a.createElement("div",{className:"prio-section prio-1"},s.a.createElement("h4",{className:"priority"},"Priority 1"),s.a.createElement("div",null,s.a.createElement("div",{className:"missed-standard"},s.a.createElement("h5",null,"Missed Standard:"),s.a.createElement("span",{className:"negate-tag"},"+"),s.a.createElement("span",{className:"standard-tag"},"U3:"),s.a.createElement("span",{className:"text"},"'Do the facility treatment guidelines include the following requirements: To do a urine culture if there are clinical indications such as suspected urinary tract infection; systemic sepsis without a clear focus or asymptomatic bacteriuria in pregnancy'")),s.a.createElement("div",{className:"recommendation"},s.a.createElement("h5",null,"Recommendation:"),s.a.createElement("span",{className:"text"},"Develop or revise treatment guidelines to include this requirement and provide training to clinical staff")),s.a.createElement("div",{className:"resources"}))),s.a.createElement("div",{className:"prio-section prio-2"},s.a.createElement("h4",{className:"priority"},"Priority 2"),s.a.createElement("div",null,s.a.createElement("div",{className:"missed-standard"},s.a.createElement("h5",null,"Missed Standard:"),s.a.createElement("span",{className:"negate-tag"},"+"),s.a.createElement("span",{className:"standard-tag"},"B9:"),s.a.createElement("span",{className:"text"},"'Does the Laboratory Handbook include the following: Blood cultures should be drawn from peripheral sites'")),s.a.createElement("div",{className:"recommendation"},s.a.createElement("h5",null,"Recommendation:"),s.a.createElement("span",{className:"text"},"Include the requirement for blood to be drawn from peripheral sites")),s.a.createElement("div",{className:"resources"},s.a.createElement("h5",null,"Resources:"),s.a.createElement("a",{href:"http://www.euro.who.int/__data/assets/pdf_file/0005/268790/WHO-guidelines-on-drawing-blood-best-practices-in-phlebotomy-Eng.pdf?ua-1",target:"#"},"WHO guidelines on drawing blood: best practices in phlebotomy")))),s.a.createElement("div",{className:"prio-section prio-3"},s.a.createElement("h4",{className:"priority"},"Priority 3"),s.a.createElement("div",null,s.a.createElement("div",{className:"missed-standard"},s.a.createElement("h5",null,"Missed Standard:"),s.a.createElement("span",{className:"negate-tag"},"+"),s.a.createElement("span",{className:"standard-tag"},"F4, U4, B4:"),s.a.createElement("span",{className:"text"},"'Does the Laboratory Handbook include the following: Informed consent should be obtained before collection of faeces, urine or blood for culture'")),s.a.createElement("div",{className:"recommendation"},s.a.createElement("h5",null,"Recommendation:"),s.a.createElement("span",{className:"text"},"Include the requirement for obtaining informed consent prior to faeces, urine or blood collection")),s.a.createElement("div",{className:"resources"},s.a.createElement("h5",null,"Resources:"),s.a.createElement("a",{href:"http://www.pathology.uct.ac.za/sites/default/files/image_tool/images/231/documents/NHLS_Handbook_2015.pdf",target:"#"},"NHLS Laboratory Handbook (South Africa)")))),s.a.createElement("h4",null,"All Missed Standards:"),this.props.missedFQs.map((function(t){return e.getMissedItem(t)})))}}]),a}(s.a.Component),j=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={nearThreshhold:90},n.updateThreshhold=n.updateThreshhold.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"getSectionTable",value:function(e){var t=this,a=F[this.props.section].departments,n=I.a.keys(I.a.get(e,"results.0.responseData",{}));return n=n.map((function(e){return I.a.find(a,(function(t){return t.id===e}))})),s.a.createElement("div",null,s.a.createElement(y.a,{striped:!0,bordered:!0,responsive:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null),s.a.createElement("th",null,"Target"),n.map((function(e){return s.a.createElement("th",{key:e.name},e.name)})),s.a.createElement("th",null,"Total Actual"))),s.a.createElement("tbody",null,e.results.map((function(e){return t.getResultRow(e)})))))}},{key:"getResultRow",value:function(e){var t=this,a=e.text,n=e.standards,r=e.targetValue,i=e.actualPerc,o=e.responseData,c=s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"response-text"},a),!!n&&s.a.createElement("span",{className:"standard-tag"}," (",n,")"));return s.a.createElement("tr",{key:a},s.a.createElement("td",null,c),s.a.createElement("td",null,r+"%"),I.a.map(o,(function(a,n){return t.getResponseCell(a,e,n)})),this.getResponseCell(i,e,"total"))}},{key:"getResponseCell",value:function(e,t,a){var n=t.numerator,r=t.targetValue,i="",o=null,c=r*this.state.nearThreshhold/100;n||"total"===a?(o=Math.round(e)+"%",i=e>=r?"ahead ":e>=c?"near ":"behind "):(o=e?"Yes":"No",i=e?"ahead ":"behind ");var l="response-value "+i+a;return s.a.createElement("td",{className:l,key:a},o)}},{key:"updateThreshhold",value:function(e){this.setState({nearThreshhold:e.target.value})}},{key:"getLegend",value:function(){var e=s.a.createElement("span",{className:"threshhold"},this.state.nearThreshhold,"%");return s.a.createElement("div",{className:"legend"},s.a.createElement("h4",{className:"text-center mb-2"},"Legend"),s.a.createElement("h5",null,s.a.createElement("span",{className:"example ahead"}),"Meets Target"),s.a.createElement("h5",null,s.a.createElement("span",{className:"example near"}),"Near Target",s.a.createElement("strong",null,"*")),s.a.createElement("h5",null,s.a.createElement("span",{className:"example behind"}),"Behind Target"),s.a.createElement(g.a.Group,null,s.a.createElement(g.a.Label,null,s.a.createElement("strong",null,"*"),"indicates that the value is at least ",e," of the target value"),s.a.createElement(g.a.Control,{type:"range",custom:!0,onChange:this.updateThreshhold,defaultValue:this.state.nearThreshhold,min:1,max:99}),s.a.createElement("em",null,"(drag slider to adjust)")))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"results-table"},this.getLegend(),this.props.resultSections.map((function(t){return s.a.createElement("div",{key:t.text},s.a.createElement("h4",{className:"mt-3"},t.text),e.getSectionTable(t))})))}}]),a}(s.a.Component),A=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={warnings:[],submitted:!1,missedFQs:null,inputsResults:null},n.sendMap=n.sendMap.bind(Object(l.a)(n)),n.submit=n.submit.bind(Object(l.a)(n)),n}return Object(c.a)(a,[{key:"sendMap",value:function(e,t){this[e]=t}},{key:"submit",value:function(){if(this.facility&&this.inputs){var e=this.facility.questions.filter((function(e){return!document.querySelector("#".concat(e.id,":checked"))})),t=this.inputs,a=F.inputs.results;t.questions.forEach((function(e){e.responses={};t.departments.forEach((function(t){var a=D(t,e);if("y_n"===e.subType){var n=!!document.querySelector("#".concat(a,":checked"));e.responses[t.id]=n,n}else if("%"===e.subType){var s=document.querySelector("#".concat(a)),r=s?Number(s.value):null;e.responses[t.id]=r,r||0}}))})),a.forEach((function(e){e.results.forEach((function(e){var a=e.target,n=e.question,s=e.numerator,r=e.denominator;if(a||console.error("Cannot calculate result without target: ",e),e.targetValue=t.targetData[a.sectionId][a.id],n){e.responseData=e.question.responses;var i=0,o=0;I.a.each(e.responseData,(function(e){I.a.isNil(e)||i++,e&&o++})),e.actualPerc=i?o/i*100:"?"}else if(s&&r){e.responseData={};var c=0,l=0;I.a.each(e.numerator.responses,(function(t,a){var n=null,s=I.a.get(e,["denominator","responses",a]);I.a.isNil(t)||I.a.isNil(s)?(console.warn("Empty num or denom val"),n="?"):(c+=t,l+=s,n=t/s*100),I.a.set(e.responseData,a,n)})),e.actualPerc=l?c/l*100:"?"}else console.error("Cannot calculate result without a linked question or num/denom: ",e)}))})),this.setState({submitted:!0,missedFQs:e,inputsResults:a,warnings:[]})}else{this.setState({warnings:["You must begin all assessment sections before submitting."]})}}},{key:"getFacilityTab",value:function(){return this.state.submitted?s.a.createElement(O,{missedFQs:this.state.missedFQs}):s.a.createElement(R,{sendMap:this.sendMap,section:"facility"})}},{key:"getInputsTab",value:function(){return this.state.submitted?s.a.createElement(j,{resultSections:this.state.inputsResults,section:"inputs"}):s.a.createElement(R,{sendMap:this.sendMap,section:"inputs"})}},{key:"getSubmitTab",value:function(){var e=this.state.submitted?s.a.createElement("div",null,"Assessment sumbitted. See section tabs for results."):null;return s.a.createElement("div",null,s.a.createElement("div",{className:"warnings text-danger"},this.state.warnings.join("\n")),e,s.a.createElement(m.a,{disabled:this.state.submitted,onClick:this.submit,variant:"outline-primary",size:"lg"},this.state.submitted?"Submitted":"Submit Assessment"))}},{key:"render",value:function(){var e=(this.state.submitted,"Submit"),t="Clinical Facility Level",a="Clinical Facility Data Inputs";this.state.submitted&&(t+=" [RESULTS]",a+=" [RESULTS]");return s.a.createElement("div",{className:"App"},s.a.createElement("h2",null,"AMR Continuous Quality Improvement Assessment"),s.a.createElement(p.a,{defaultActiveKey:"facility"},s.a.createElement(f.a,{eventKey:"facility",title:t},this.getFacilityTab()),s.a.createElement(f.a,{eventKey:"inputs",title:a},this.getInputsTab()),s.a.createElement(f.a,{eventKey:"submit",title:e},this.getSubmitTab())))}}]),a}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.cd7811e9.chunk.js.map